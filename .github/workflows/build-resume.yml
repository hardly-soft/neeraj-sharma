name: Build Resume (DOCX + PDF)

on:
  push:
    paths:
      - "career-history/**"
      - ".github/workflows/build-resume.yml"
  workflow_dispatch: {}

permissions:
  contents: write

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      # Use a Pandoc + LaTeX container so PDF generation works reliably
      - name: Generate DOCX and PDF
        uses: docker://pandoc/latex:latest
        with:
          args: >-
            --from=gfm
            --standalone
            career-history/career-history.md
            -o career-history/career-history.pdf

      - name: Generate DOCX
        uses: docker://pandoc/latex:latest
        with:
          args: >-
            --from=gfm
            --standalone
            career-history/career-history.md
            -o career-history/career-history.docx

      - name: Commit generated files
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "chore(resume): auto-generate PDF and DOCX"
          file_pattern: "career-history/career-history.pdf career-history/career-history.docx"
